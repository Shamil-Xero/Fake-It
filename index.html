<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fake It - Party Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
    }

    .container {
        background: white;
        border-radius: 20px;
        padding: 40px;
        max-width: 600px;
        width: 100%;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }

    h1 {
        color: #667eea;
        text-align: center;
        margin-bottom: 10px;
        font-size: 2.5em;
    }

    .subtitle {
        text-align: center;
        color: #666;
        margin-bottom: 30px;
    }

    .setup-screen, .role-screen, .game-screen, .voting-screen, .results-screen {
        display: none;
    }

    .setup-screen.active, .role-screen.active, .game-screen.active, .voting-screen.active, .results-screen.active {
        display: block;
    }

    .input-group {
        margin-bottom: 20px;
    }

    label {
        display: block;
        margin-bottom: 8px;
        color: #333;
        font-weight: 600;
    }

    input[type="text"], input[type="number"], select {
        width: 100%;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
        transition: border-color 0.3s;
    }

    input[type="text"]:focus, input[type="number"]:focus, select:focus {
        outline: none;
        border-color: #667eea;
    }

    button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        width: 100%;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    button:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    button:active {
        transform: translateY(0);
    }

    .secondary-btn {
        background: #6c757d;
        margin-top: 10px;
    }

    .player-list {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
    }

    .player-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 15px;
        background: white;
        margin-bottom: 8px;
        border-radius: 6px;
        border-left: 4px solid;
    }

    .remove-btn {
        background: #dc3545;
        padding: 5px 15px;
        width: auto;
        font-size: 14px;
    }

    .role-reveal {
        text-align: center;
        padding: 40px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 15px;
        color: white;
        margin-bottom: 20px;
    }

    .role-reveal h2 {
        font-size: 2em;
        margin-bottom: 20px;
    }

    .secret-word {
        font-size: 3em;
        font-weight: bold;
        margin: 20px 0;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .hint-word {
        font-size: 1.5em;
        margin-top: 15px;
        color: #ffd700;
        font-style: italic;
    }

    .faker-reveal {
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
    }

    .hidden {
        filter: blur(10px);
        user-select: none;
    }

    .reveal-btn {
        background: rgba(255,255,255,0.3);
        margin-top: 20px;
    }

    .player-turn {
        background: #e3f2fd;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        text-align: center;
    }

    .player-turn h3 {
        color: #1976d2;
        font-size: 1.5em;
    }

    .voting-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 10px;
        margin-bottom: 20px;
    }

    .vote-btn {
        padding: 15px;
        background: white;
        color: #333;
        border: 3px solid;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 600;
        font-size: 16px;
    }

    .vote-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .vote-btn.selected {
        transform: scale(1.05);
        box-shadow: 0 0 0 3px rgba(255,255,255,0.5);
    }

    .results-box {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
    }

    .results-box h3 {
        margin-bottom: 15px;
        color: #333;
    }

    .vote-count {
        padding: 10px 15px;
        background: white;
        margin-bottom: 8px;
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        border-left: 4px solid;
    }

    .winner {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
        padding: 30px;
        border-radius: 15px;
        text-align: center;
        margin-bottom: 20px;
        font-size: 1.5em;
    }

    .storage-info {
        text-align: center;
        color: #999;
        font-size: 0.9em;
        margin-top: 10px;
    }

    .toggle-container {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
    }

    .toggle-switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 24px;
    }

    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: .4s;
        border-radius: 24px;
    }

    .slider:before {
        position: absolute;
        content: "";
        height: 18px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
    }

    input:checked + .slider {
        background-color: #667eea;
    }

    input:checked + .slider:before {
        transform: translateX(26px);
    }

    .category-checkboxes {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        margin-top: 10px;
    }

    .checkbox-item {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .checkbox-item input[type="checkbox"] {
        width: auto;
        cursor: pointer;
    }

    .round-counter {
        background: #667eea;
        color: white;
        padding: 10px 20px;
        border-radius: 50px;
        display: inline-block;
        margin-bottom: 15px;
        font-weight: bold;
    }

    .game-info {
        background: #fff3cd;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        border-left: 4px solid #ffc107;
    }

    .game-info p {
        margin: 5px 0;
        color: #856404;
    }
</style>
```

</head>
<body>
    <div class="container">
        <h1>üé≠ Fake It</h1>
        <p class="subtitle">Can you spot the faker?</p>

```
    <!-- Setup Screen -->
    <div class="setup-screen active">
        <div class="input-group">
            <label>Add Player Name:</label>
            <input type="text" id="playerNameInput" placeholder="Enter player name">
            <button onclick="addPlayer()" style="margin-top: 10px;">Add Player</button>
        </div>

        <div class="player-list" id="playerList" style="display: none;">
            <h3>Players:</h3>
            <div id="players"></div>
        </div>

        <div class="input-group">
            <label>Number of Imposters:</label>
            <input type="number" id="imposterCount" min="1" max="5" value="1">
        </div>

        <div class="input-group">
            <label>Starting Player:</label>
            <select id="startingPlayer">
                <option value="random">Random</option>
            </select>
        </div>

        <div class="input-group">
            <label>Number of Rounds:</label>
            <input type="number" id="roundCount" min="1" max="10" value="3">
        </div>

        <div class="toggle-container">
            <label style="margin: 0;">Multiple Categories:</label>
            <label class="toggle-switch">
                <input type="checkbox" id="multiCategoryToggle" onchange="toggleMultiCategory()">
                <span class="slider"></span>
            </label>
        </div>

        <div class="input-group" id="singleCategoryGroup">
            <label>Category:</label>
            <select id="categorySelect">
                <option value="animals">Animals</option>
                <option value="food">Food & Drinks</option>
                <option value="places">Places</option>
                <option value="movies">Movies & TV</option>
                <option value="objects">Everyday Objects</option>
                <option value="sports">Sports</option>
            </select>
        </div>

        <div class="input-group" id="multiCategoryGroup" style="display: none;">
            <label>Select Categories:</label>
            <div class="category-checkboxes">
                <div class="checkbox-item">
                    <input type="checkbox" id="cat_animals" value="animals">
                    <label for="cat_animals" style="margin: 0;">Animals</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="cat_food" value="food">
                    <label for="cat_food" style="margin: 0;">Food & Drinks</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="cat_places" value="places">
                    <label for="cat_places" style="margin: 0;">Places</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="cat_movies" value="movies">
                    <label for="cat_movies" style="margin: 0;">Movies & TV</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="cat_objects" value="objects">
                    <label for="cat_objects" style="margin: 0;">Everyday Objects</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="cat_sports" value="sports">
                    <label for="cat_sports" style="margin: 0;">Sports</label>
                </div>
            </div>
        </div>

        <button onclick="startGame()">Start Game</button>
        <p class="storage-info">‚úì Player names are saved automatically</p>
    </div>

    <!-- Role Reveal Screen -->
    <div class="role-screen">
        <div style="text-align: center;">
            <span class="round-counter">Round <span id="currentRoundDisplay">1</span> / <span id="totalRoundsDisplay">3</span></span>
        </div>
        <div class="role-reveal" id="roleReveal">
            <h2 id="playerNameDisplay"></h2>
            <div id="roleContent" class="hidden">
                <p id="roleText"></p>
                <div class="secret-word" id="secretWord"></div>
                <div class="hint-word" id="hintWord"></div>
            </div>
            <button class="reveal-btn" onclick="revealRole()">üëÅÔ∏è Tap to See Your Role</button>
        </div>
        <button onclick="nextPlayer()">Next Player</button>
    </div>

    <!-- Game Screen -->
    <div class="game-screen">
        <div style="text-align: center; margin-bottom: 20px;">
            <span class="round-counter">Round <span id="gameRoundDisplay">1</span> / <span id="gameTotalRoundsDisplay">3</span></span>
        </div>
        <div class="game-info">
            <p><strong>Starting Player:</strong> <span id="startingPlayerName"></span></p>
            <p><strong>Number of Imposters:</strong> <span id="imposterCountDisplay"></span></p>
        </div>
        <div class="player-turn">
            <h3>Discussion Time</h3>
            <p>Everyone takes turns giving a clue about the secret word!</p>
            <p style="margin-top: 10px; color: #666;">Start with <strong id="startPlayerReminder"></strong> and go clockwise.</p>
        </div>
        <button onclick="startVoting()">Start Voting</button>
    </div>

    <!-- Voting Screen -->
    <div class="voting-screen">
        <h2 style="text-align: center; margin-bottom: 20px;">Who is the Faker?</h2>
        <p style="text-align: center; margin-bottom: 20px; color: #666;">Each player click on who you think is faking it!</p>
        <div class="voting-grid" id="votingGrid"></div>
        <button onclick="showResults()">Reveal Results</button>
    </div>

    <!-- Results Screen -->
    <div class="results-screen">
        <div style="text-align: center; margin-bottom: 20px;">
            <span class="round-counter">Round <span id="resultsRoundDisplay">1</span> / <span id="resultsTotalRoundsDisplay">3</span></span>
        </div>
        <div id="winnerDisplay"></div>
        
        <div class="results-box">
            <h3>Vote Results:</h3>
            <div id="voteResults"></div>
        </div>

        <div class="results-box">
            <h3>The secret word was:</h3>
            <div style="text-align: center; font-size: 2em; color: #667eea; font-weight: bold; margin-top: 10px;" id="finalWord"></div>
            <div style="text-align: center; color: #666; margin-top: 10px;">Hint: <span id="finalHint"></span></div>
        </div>

        <div class="results-box" id="imposterListBox">
            <h3>The Imposters were:</h3>
            <div id="imposterList"></div>
        </div>

        <div id="scoreBoard" class="results-box">
            <h3>Score Board:</h3>
            <div id="scores"></div>
        </div>

        <button onclick="nextRound()" id="nextRoundBtn">Next Round</button>
        <button onclick="resetGame()" class="secondary-btn">New Game</button>
    </div>
</div>

<script>
    const words = {
        animals: [
            {word: 'Dog', hint: 'Pet'},
            {word: 'Cat', hint: 'Pet'},
            {word: 'Elephant', hint: 'Large animal'},
            {word: 'Lion', hint: 'Wild cat'},
            {word: 'Penguin', hint: 'Bird'},
            {word: 'Dolphin', hint: 'Sea creature'},
            {word: 'Tiger', hint: 'Wild cat'},
            {word: 'Giraffe', hint: 'Tall animal'},
            {word: 'Zebra', hint: 'Striped animal'},
            {word: 'Koala', hint: 'Tree animal'}
        ],
        food: [
            {word: 'Pizza', hint: 'Italian food'},
            {word: 'Burger', hint: 'Fast food'},
            {word: 'Sushi', hint: 'Japanese food'},
            {word: 'Pasta', hint: 'Italian food'},
            {word: 'Tacos', hint: 'Mexican food'},
            {word: 'Ice Cream', hint: 'Frozen dessert'},
            {word: 'Coffee', hint: 'Hot drink'},
            {word: 'Chocolate', hint: 'Sweet treat'},
            {word: 'Apple', hint: 'Fruit'},
            {word: 'Sandwich', hint: 'Bread food'}
        ],
        places: [
            {word: 'Beach', hint: 'Water location'},
            {word: 'Mountain', hint: 'High place'},
            {word: 'Library', hint: 'Quiet place'},
            {word: 'Restaurant', hint: 'Eating place'},
            {word: 'Park', hint: 'Outdoor space'},
            {word: 'Museum', hint: 'Cultural place'},
            {word: 'Cinema', hint: 'Entertainment venue'},
            {word: 'Hospital', hint: 'Medical place'},
            {word: 'School', hint: 'Learning place'},
            {word: 'Airport', hint: 'Travel hub'}
        ],
        movies: [
            {word: 'Star Wars', hint: 'Space franchise'},
            {word: 'Harry Potter', hint: 'Magic series'},
            {word: 'Marvel', hint: 'Superhero universe'},
            {word: 'Disney', hint: 'Animation studio'},
            {word: 'Titanic', hint: 'Ship movie'},
            {word: 'Inception', hint: 'Dream movie'},
            {word: 'Avatar', hint: 'Blue aliens'},
            {word: 'Jurassic Park', hint: 'Dinosaur movie'}
        ],
        objects: [
            {word: 'Phone', hint: 'Communication device'},
            {word: 'Lamp', hint: 'Light source'},
            {word: 'Chair', hint: 'Furniture'},
            {word: 'Clock', hint: 'Time device'},
            {word: 'Mirror', hint: 'Reflection'},
            {word: 'Umbrella', hint: 'Rain tool'},
            {word: 'Wallet', hint: 'Money holder'},
            {word: 'Keys', hint: 'Door opener'},
            {word: 'Pencil', hint: 'Writing tool'},
            {word: 'Book', hint: 'Reading material'}
        ],
        sports: [
            {word: 'Soccer', hint: 'Ball sport'},
            {word: 'Basketball', hint: 'Hoop game'},
            {word: 'Tennis', hint: 'Racket sport'},
            {word: 'Swimming', hint: 'Water activity'},
            {word: 'Baseball', hint: 'Bat sport'},
            {word: 'Golf', hint: 'Club game'},
            {word: 'Skiing', hint: 'Snow sport'},
            {word: 'Boxing', hint: 'Fighting sport'},
            {word: 'Cycling', hint: 'Bike activity'}
        ]
    };

    const playerColors = [
        '#e74c3c', '#3498db', '#2ecc71', '#f39c12', '#9b59b6',
        '#1abc9c', '#e67e22', '#34495e', '#16a085', '#c0392b'
    ];

    let players = [];
    let currentPlayerIndex = 0;
    let fakerIndices = [];
    let secretWord = '';
    let hintWord = '';
    let votes = {};
    let currentRound = 1;
    let totalRounds = 3;
    let startingPlayerIndex = 0;
    let playerWins = 0;
    let fakerWins = 0;

    window.addEventListener('DOMContentLoaded', loadPlayers);

    function getPlayerColor(index) {
        return playerColors[index % playerColors.length];
    }

    function loadPlayers() {
        const saved = localStorage.getItem('fakeItPlayers');
        if (saved) {
            try {
                players = JSON.parse(saved);
                updatePlayerList();
                updateStartingPlayerDropdown();
            } catch (e) {
                console.error('Error loading players:', e);
            }
        }
    }

    function savePlayers() {
        try {
            localStorage.setItem('fakeItPlayers', JSON.stringify(players));
        } catch (e) {
            console.error('Error saving players:', e);
        }
    }

    function addPlayer() {
        const input = document.getElementById('playerNameInput');
        const name = input.value.trim();
        
        if (name && !players.includes(name)) {
            players.push(name);
            input.value = '';
            savePlayers();
            updatePlayerList();
            updateStartingPlayerDropdown();
        }
    }

    function updatePlayerList() {
        const list = document.getElementById('playerList');
        const playersDiv = document.getElementById('players');
        
        if (players.length > 0) {
            list.style.display = 'block';
            playersDiv.innerHTML = players.map((p, i) => `
                <div class="player-item" style="border-left-color: ${getPlayerColor(i)};">
                    <span>${p}</span>
                    <button class="remove-btn" onclick="removePlayer(${i})">Remove</button>
                </div>
            `).join('');
        } else {
            list.style.display = 'none';
        }
    }

    function updateStartingPlayerDropdown() {
        const dropdown = document.getElementById('startingPlayer');
        dropdown.innerHTML = '<option value="random">Random</option>' + 
            players.map((p, i) => `<option value="${i}">${p}</option>`).join('');
    }

    function removePlayer(index) {
        players.splice(index, 1);
        savePlayers();
        updatePlayerList();
        updateStartingPlayerDropdown();
    }

    function toggleMultiCategory() {
        const isMulti = document.getElementById('multiCategoryToggle').checked;
        document.getElementById('singleCategoryGroup').style.display = isMulti ? 'none' : 'block';
        document.getElementById('multiCategoryGroup').style.display = isMulti ? 'block' : 'none';
    }

    function startGame() {
        if (players.length < 3) {
            alert('You need at least 3 players to play!');
            return;
        }

        const imposterCount = parseInt(document.getElementById('imposterCount').value);
        if (imposterCount >= players.length) {
            alert('Number of imposters must be less than total players!');
            return;
        }

        const isMultiCategory = document.getElementById('multiCategoryToggle').checked;
        let categories = [];

        if (isMultiCategory) {
            const checkboxes = document.querySelectorAll('.category-checkboxes input[type="checkbox"]:checked');
            categories = Array.from(checkboxes).map(cb => cb.value);
            if (categories.length === 0) {
                alert('Please select at least one category!');
                return;
            }
        } else {
            categories = [document.getElementById('categorySelect').value];
        }

        const selectedCategory = categories[Math.floor(Math.random() * categories.length)];
        const wordList = words[selectedCategory];
        const selectedWord = wordList[Math.floor(Math.random() * wordList.length)];
        secretWord = selectedWord.word;
        hintWord = selectedWord.hint;

        fakerIndices = [];
        while (fakerIndices.length < imposterCount) {
            const randomIndex = Math.floor(Math.random() * players.length);
            if (!fakerIndices.includes(randomIndex)) {
                fakerIndices.push(randomIndex);
            }
        }

        const startingPlayerValue = document.getElementById('startingPlayer').value;
        if (startingPlayerValue === 'random') {
            startingPlayerIndex = Math.floor(Math.random() * players.length);
        } else {
            startingPlayerIndex = parseInt(startingPlayerValue);
        }

        totalRounds = parseInt(document.getElementById('roundCount').value);
        currentRound = 1;
        playerWins = 0;
        fakerWins = 0;

        currentPlayerIndex = 0;

        updateRoundDisplays();
        showScreen('role-screen');
        showPlayerRole();
    }

    function updateRoundDisplays() {
        document.getElementById('currentRoundDisplay').textContent = currentRound;
        document.getElementById('totalRoundsDisplay').textContent = totalRounds;
        document.getElementById('gameRoundDisplay').textContent = currentRound;
        document.getElementById('gameTotalRoundsDisplay').textContent = totalRounds;
        document.getElementById('resultsRoundDisplay').textContent = currentRound;
        document.getElementById('resultsTotalRoundsDisplay').textContent = totalRounds;
    }

    function showPlayerRole() {
        const playerName = document.getElementById('playerNameDisplay');
        const roleReveal = document.getElementById('roleReveal');
        const roleContent = document.getElementById('roleContent');
        const roleText = document.getElementById('roleText');
        const secretWordDiv = document.getElementById('secretWord');
        const hintWordDiv = document.getElementById('hintWord');
        
        playerName.textContent = players[currentPlayerIndex];
        roleContent.classList.add('hidden');
        
        if (fakerIndices.includes(currentPlayerIndex)) {
            roleReveal.classList.add('faker-reveal');
            roleText.textContent = 'You are an IMPOSTER!';
            secretWordDiv.textContent = '‚ùì';
            hintWordDiv.textContent = `Hint: ${hintWord}`;
            hintWordDiv.style.display = 'block';
        } else {
            roleReveal.classList.remove('faker-reveal');
            roleText.textContent = 'The secret word is:';
            secretWordDiv.textContent = secretWord;
            hintWordDiv.style.display = 'none';
        }

        document.querySelector('.reveal-btn').style.display = 'block';
    }

    function revealRole() {
        const roleContent = document.getElementById('roleContent');
        roleContent.classList.remove('hidden');
        document.querySelector('.reveal-btn').style.display = 'none';
    }

    function nextPlayer() {
        currentPlayerIndex++;
        
        if (currentPlayerIndex < players.length) {
            showPlayerRole();
        } else {
            document.getElementById('startingPlayerName').textContent = players[startingPlayerIndex];
            document.getElementById('imposterCountDisplay').textContent = fakerIndices.length;
            document.getElementById('startPlayerReminder').textContent = players[startingPlayerIndex];
            showScreen('game-screen');
        }
    }

    function startVoting() {
        const grid = document.getElementById('votingGrid');
        grid.innerHTML = players.map((p, i) => `
            <button class="vote-btn" style="border-color: ${getPlayerColor(i)};" onclick="vote(${i})">${p}</button>
        `).join('');
        votes = {};
        showScreen('voting-screen');
    }

    function vote(index) {
        const buttons = document.querySelectorAll('.vote-btn');
        const clickedButton = buttons[index];
        
        clickedButton.classList.toggle('selected');
        
        const playerName = players[index];
        if (clickedButton.classList.contains('selected')) {
            votes[playerName] = (votes[playerName] || 0) + 1;
        } else {
            votes[playerName] = (votes[playerName] || 1) - 1;
            if (votes[playerName] <= 0) {
                delete votes[playerName];
            }
        }
    }

    function showResults() {
        const voteResults = document.getElementById('voteResults');
        const winnerDisplay = document.getElementById('winnerDisplay');
        const finalWord = document.getElementById('finalWord');
        const finalHint = document.getElementById('finalHint');
        const imposterList = document.getElementById('imposterList');

        let resultsHTML = '';
        let maxVotes = 0;
        let mostVoted = [];

        for (let player in votes) {
            const playerIndex = players.indexOf(player);
            const color = getPlayerColor(playerIndex);
            resultsHTML += `
                <div class="vote-count" style="border-left-color: ${color};">
                    <span>${player}</span>
                    <span>${votes[player]} vote(s)</span>
                </div>
            `;
            if (votes[player] > maxVotes) {
                maxVotes = votes[player];
                mostVoted = [player];
            } else if (votes[player] === maxVotes && maxVotes > 0) {
                mostVoted.push(player);
            }
        }

        if (Object.keys(votes).length === 0) {
            resultsHTML = '<p style="text-align: center; color: #666;">No votes were cast!</p>';
        }

        voteResults.innerHTML = resultsHTML;

        // Determine if players won or fakers won
        const fakerNames = fakerIndices.map(i => players[i]);
        let playersWon = false;

        if (mostVoted.length > 0) {
            // Check if any of the most voted are fakers
            const votedOutFaker = mostVoted.some(name => fakerNames.includes(name));
            
            if (votedOutFaker && mostVoted.length === 1) {
                playersWon = true;
                playerWins++;
                winnerDisplay.innerHTML = `
                    <div class="winner">
                        üéâ Players Win! üéâ<br>
                        You correctly identified the imposter!
                    </div>
                `;
            } else if (votedOutFaker && mostVoted.length > 1) {
                winnerDisplay.innerHTML = `
                    <div class="winner" style="background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);">
                        ü§ù It's a Tie! ü§ù<br>
                        Multiple players tied with most votes
                    </div>
                `;
            } else {
                fakerWins++;
                winnerDisplay.innerHTML = `
                    <div class="winner" style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);">
                        üòà Imposters Win! üòà<br>
                        The imposters fooled everyone!
                    </div>
                `;
            }
        } else {
            fakerWins++;
            winnerDisplay.innerHTML = `
                <div class="winner" style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);">
                    üòà Imposters Win! üòà<br>
                    No one was voted out!
                </div>
            `;
        }

        finalWord.textContent = secretWord;
        finalHint.textContent = hintWord;

        imposterList.innerHTML = fakerNames.map((name, idx) => {
            const playerIndex = players.indexOf(name);
            const color = getPlayerColor(playerIndex);
            return `
                <div class="vote-count" style="border-left-color: ${color};">
                    <span>${name}</span>
                    <span>üé≠</span>
                </div>
            `;
        }).join('');

        // Display scoreboard
        const scoresDiv = document.getElementById('scores');
        scoresDiv.innerHTML = `
            <div class="vote-count" style="border-left-color: #28a745;">
                <span>üë• Players</span>
                <span>${playerWins} win(s)</span>
            </div>
            <div class="vote-count" style="border-left-color: #dc3545;">
                <span>üé≠ Imposters</span>
                <span>${fakerWins} win(s)</span>
            </div>
        `;

        // Update button text
        const nextRoundBtn = document.getElementById('nextRoundBtn');
        if (currentRound >= totalRounds) {
            nextRoundBtn.textContent = 'Game Complete!';
            nextRoundBtn.style.display = 'none';
        } else {
            nextRoundBtn.textContent = 'Next Round';
            nextRoundBtn.style.display = 'block';
        }

        showScreen('results-screen');
    }

    function nextRound() {
        if (currentRound >= totalRounds) {
            return;
        }

        currentRound++;
        
        // Select new word
        const isMultiCategory = document.getElementById('multiCategoryToggle').checked;
        let categories = [];

        if (isMultiCategory) {
            const checkboxes = document.querySelectorAll('.category-checkboxes input[type="checkbox"]:checked');
            categories = Array.from(checkboxes).map(cb => cb.value);
        } else {
            categories = [document.getElementById('categorySelect').value];
        }

        const selectedCategory = categories[Math.floor(Math.random() * categories.length)];
        const wordList = words[selectedCategory];
        const selectedWord = wordList[Math.floor(Math.random() * wordList.length)];
        secretWord = selectedWord.word;
        hintWord = selectedWord.hint;

        // Select new fakers
        const imposterCount = parseInt(document.getElementById('imposterCount').value);
        fakerIndices = [];
        while (fakerIndices.length < imposterCount) {
            const randomIndex = Math.floor(Math.random() * players.length);
            if (!fakerIndices.includes(randomIndex)) {
                fakerIndices.push(randomIndex);
            }
        }

        // Randomize starting player for new round
        startingPlayerIndex = Math.floor(Math.random() * players.length);

        currentPlayerIndex = 0;
        votes = {};

        updateRoundDisplays();
        showScreen('role-screen');
        showPlayerRole();
    }

    function resetGame() {
        currentRound = 1;
        playerWins = 0;
        fakerWins = 0;
        currentPlayerIndex = 0;
        votes = {};
        showScreen('setup-screen');
    }

    function showScreen(screenName) {
        document.querySelectorAll('.setup-screen, .role-screen, .game-screen, .voting-screen, .results-screen').forEach(screen => {
            screen.classList.remove('active');
        });
        document.querySelector(`.${screenName}`).classList.add('active');
    }

    // Allow Enter key to add player
    document.getElementById('playerNameInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            addPlayer();
        }
    });
</script>
```

</body>
</html>
